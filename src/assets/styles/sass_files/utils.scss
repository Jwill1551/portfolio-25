// Config
$gutter: 8px;
$util-size: 30; // how many steps (0 → 6 = 7 total values)
// Bulma breakpoint variables
$breakpoints: (
  mobile:  0,
  tablet:  769px,
  desktop: 1024px,
  widescreen: 1216px,
  fullhd: 1408px
);

// --- Core generator ---
@mixin generate-spacing($prefix, $property, $max: $util-size) {
  @for $i from 0 through $max {
    $val: $i * $gutter;

    .#{$prefix}-#{$i} { #{$property}: $val !important; }

    .#{$prefix}t-#{$i} { #{$property}-top: $val !important; }
    .#{$prefix}b-#{$i} { #{$property}-bottom: $val !important; }
    .#{$prefix}l-#{$i} { #{$property}-left: $val !important; }
    .#{$prefix}r-#{$i} { #{$property}-right: $val !important; }

    .#{$prefix}x-#{$i} {
      #{$property}-left: $val !important;
      #{$property}-right: $val !important;
    }
    .#{$prefix}y-#{$i} {
      #{$property}-top: $val !important;
      #{$property}-bottom: $val !important;
    }

    @each $breakpoints, $size in $breakpoints {
      @media (min-width: $size) {
        .#{$prefix}-#{$breakpoints}-#{$i} { #{$property}: $val !important; }

        .#{$prefix}t-#{$breakpoints}-#{$i} { #{$property}-top: $val !important; }
        .#{$prefix}b-#{$breakpoints}-#{$i} { #{$property}-bottom: $val !important; }
        .#{$prefix}l-#{$breakpoints}-#{$i} { #{$property}-left: $val !important; }
        .#{$prefix}r-#{$breakpoints}-#{$i} { #{$property}-right: $val !important; }

        .#{$prefix}x-#{$breakpoints}-#{$i} {
          #{$property}-left: $val !important;
          #{$property}-right: $val !important;
        }
        .#{$prefix}y-#{$breakpoints}-#{$i} {
          #{$property}-top: $val !important;
          #{$property}-bottom: $val !important;
        }
      }
    }
  }
}

// --- Responsive wrapper ---
@mixin spacing-utilities {
  // Base (no breakpoint)
  @include generate-spacing(m, margin);
  @include generate-spacing(p, padding);
}

// Bulma breakpoint map (based on official source)
$breakpoints: (
  mobile:  0,
  tablet:  769px,
  desktop: 1024px,
  widescreen: 1216px,
  fullhd: 1408px
);

/// Helper: get next breakpoint value
@function next-breakpoint($breakpoint) {
  $keys: map-keys($breakpoints);
  $found: false;

  @each $key in $keys {
    @if $found {
      @return map-get($breakpoints, $key);
    }
    @if $key == $breakpoint {
      $found: true;
    }
  }

  @return null; // if no next breakpoint (e.g., fullhd)
}

/// Media query helper for Bulma breakpoints
/// Usage:
///   @include respond-to(tablet, up) { ... }
///   @include respond-to(tablet, down) { ... }
@mixin respond-to($breakpoint, $direction: up) {
  $value: map-get($breakpoints, $breakpoint);

  @if $value == null {
    @warn "Unknown breakpoint: #{$breakpoint}";
  } @else if $direction == up {
    @media (min-width: $value) {
      @content;
    }
  } @else if $direction == down {
    $next: next-breakpoint($breakpoint);

    @if $next {
      @media (max-width: ($next - 1)) {
        @content;
      }
    } @else {
      // No upper limit (for fullhd and above)
      @warn "No higher breakpoint after #{$breakpoint} — using infinite range.";
      @media (max-width: 9999px) {
        @content;
      }
    }
  } @else {
    @warn "Invalid direction: #{$direction}. Use 'up' or 'down'.";
  }
}

